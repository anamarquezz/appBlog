{"ast":null,"code":"// pass in a manifest with a 'bin' field here, and it'll turn it\n// into a properly santized bin object\nconst {\n  join,\n  basename\n} = require('path');\n\nconst normalize = pkg => !pkg.bin ? removeBin(pkg) : typeof pkg.bin === 'string' ? normalizeString(pkg) : Array.isArray(pkg.bin) ? normalizeArray(pkg) : typeof pkg.bin === 'object' ? normalizeObject(pkg) : removeBin(pkg);\n\nconst normalizeString = pkg => {\n  if (!pkg.name) {\n    return removeBin(pkg);\n  }\n\n  pkg.bin = {\n    [pkg.name]: pkg.bin\n  };\n  return normalizeObject(pkg);\n};\n\nconst normalizeArray = pkg => {\n  pkg.bin = pkg.bin.reduce((acc, k) => {\n    acc[basename(k)] = k;\n    return acc;\n  }, {});\n  return normalizeObject(pkg);\n};\n\nconst removeBin = pkg => {\n  delete pkg.bin;\n  return pkg;\n};\n\nconst normalizeObject = pkg => {\n  const orig = pkg.bin;\n  const clean = {};\n  let hasBins = false;\n  Object.keys(orig).forEach(binKey => {\n    const base = join('/', basename(binKey.replace(/\\\\|:/g, '/'))).slice(1);\n\n    if (typeof orig[binKey] !== 'string' || !base) {\n      return;\n    }\n\n    const binTarget = join('/', orig[binKey]).replace(/\\\\/g, '/').slice(1);\n\n    if (!binTarget) {\n      return;\n    }\n\n    clean[base] = binTarget;\n    hasBins = true;\n  });\n\n  if (hasBins) {\n    pkg.bin = clean;\n  } else {\n    delete pkg.bin;\n  }\n\n  return pkg;\n};\n\nmodule.exports = normalize;","map":{"version":3,"names":["join","basename","require","normalize","pkg","bin","removeBin","normalizeString","Array","isArray","normalizeArray","normalizeObject","name","reduce","acc","k","orig","clean","hasBins","Object","keys","forEach","binKey","base","replace","slice","binTarget","module","exports"],"sources":["C:/sources/GitHub/appBlog/BlogLab/BlogLab-UI/node_modules/read-package-json/node_modules/npm-normalize-package-bin/lib/index.js"],"sourcesContent":["// pass in a manifest with a 'bin' field here, and it'll turn it\n// into a properly santized bin object\nconst { join, basename } = require('path')\n\nconst normalize = pkg =>\n  !pkg.bin ? removeBin(pkg)\n  : typeof pkg.bin === 'string' ? normalizeString(pkg)\n  : Array.isArray(pkg.bin) ? normalizeArray(pkg)\n  : typeof pkg.bin === 'object' ? normalizeObject(pkg)\n  : removeBin(pkg)\n\nconst normalizeString = pkg => {\n  if (!pkg.name) {\n    return removeBin(pkg)\n  }\n  pkg.bin = { [pkg.name]: pkg.bin }\n  return normalizeObject(pkg)\n}\n\nconst normalizeArray = pkg => {\n  pkg.bin = pkg.bin.reduce((acc, k) => {\n    acc[basename(k)] = k\n    return acc\n  }, {})\n  return normalizeObject(pkg)\n}\n\nconst removeBin = pkg => {\n  delete pkg.bin\n  return pkg\n}\n\nconst normalizeObject = pkg => {\n  const orig = pkg.bin\n  const clean = {}\n  let hasBins = false\n  Object.keys(orig).forEach(binKey => {\n    const base = join('/', basename(binKey.replace(/\\\\|:/g, '/'))).slice(1)\n\n    if (typeof orig[binKey] !== 'string' || !base) {\n      return\n    }\n\n    const binTarget = join('/', orig[binKey])\n      .replace(/\\\\/g, '/').slice(1)\n\n    if (!binTarget) {\n      return\n    }\n\n    clean[base] = binTarget\n    hasBins = true\n  })\n\n  if (hasBins) {\n    pkg.bin = clean\n  } else {\n    delete pkg.bin\n  }\n\n  return pkg\n}\n\nmodule.exports = normalize\n"],"mappings":"AAAA;AACA;AACA,MAAM;EAAEA,IAAF;EAAQC;AAAR,IAAqBC,OAAO,CAAC,MAAD,CAAlC;;AAEA,MAAMC,SAAS,GAAGC,GAAG,IACnB,CAACA,GAAG,CAACC,GAAL,GAAWC,SAAS,CAACF,GAAD,CAApB,GACE,OAAOA,GAAG,CAACC,GAAX,KAAmB,QAAnB,GAA8BE,eAAe,CAACH,GAAD,CAA7C,GACAI,KAAK,CAACC,OAAN,CAAcL,GAAG,CAACC,GAAlB,IAAyBK,cAAc,CAACN,GAAD,CAAvC,GACA,OAAOA,GAAG,CAACC,GAAX,KAAmB,QAAnB,GAA8BM,eAAe,CAACP,GAAD,CAA7C,GACAE,SAAS,CAACF,GAAD,CALb;;AAOA,MAAMG,eAAe,GAAGH,GAAG,IAAI;EAC7B,IAAI,CAACA,GAAG,CAACQ,IAAT,EAAe;IACb,OAAON,SAAS,CAACF,GAAD,CAAhB;EACD;;EACDA,GAAG,CAACC,GAAJ,GAAU;IAAE,CAACD,GAAG,CAACQ,IAAL,GAAYR,GAAG,CAACC;EAAlB,CAAV;EACA,OAAOM,eAAe,CAACP,GAAD,CAAtB;AACD,CAND;;AAQA,MAAMM,cAAc,GAAGN,GAAG,IAAI;EAC5BA,GAAG,CAACC,GAAJ,GAAUD,GAAG,CAACC,GAAJ,CAAQQ,MAAR,CAAe,CAACC,GAAD,EAAMC,CAAN,KAAY;IACnCD,GAAG,CAACb,QAAQ,CAACc,CAAD,CAAT,CAAH,GAAmBA,CAAnB;IACA,OAAOD,GAAP;EACD,CAHS,EAGP,EAHO,CAAV;EAIA,OAAOH,eAAe,CAACP,GAAD,CAAtB;AACD,CAND;;AAQA,MAAME,SAAS,GAAGF,GAAG,IAAI;EACvB,OAAOA,GAAG,CAACC,GAAX;EACA,OAAOD,GAAP;AACD,CAHD;;AAKA,MAAMO,eAAe,GAAGP,GAAG,IAAI;EAC7B,MAAMY,IAAI,GAAGZ,GAAG,CAACC,GAAjB;EACA,MAAMY,KAAK,GAAG,EAAd;EACA,IAAIC,OAAO,GAAG,KAAd;EACAC,MAAM,CAACC,IAAP,CAAYJ,IAAZ,EAAkBK,OAAlB,CAA0BC,MAAM,IAAI;IAClC,MAAMC,IAAI,GAAGvB,IAAI,CAAC,GAAD,EAAMC,QAAQ,CAACqB,MAAM,CAACE,OAAP,CAAe,OAAf,EAAwB,GAAxB,CAAD,CAAd,CAAJ,CAAkDC,KAAlD,CAAwD,CAAxD,CAAb;;IAEA,IAAI,OAAOT,IAAI,CAACM,MAAD,CAAX,KAAwB,QAAxB,IAAoC,CAACC,IAAzC,EAA+C;MAC7C;IACD;;IAED,MAAMG,SAAS,GAAG1B,IAAI,CAAC,GAAD,EAAMgB,IAAI,CAACM,MAAD,CAAV,CAAJ,CACfE,OADe,CACP,KADO,EACA,GADA,EACKC,KADL,CACW,CADX,CAAlB;;IAGA,IAAI,CAACC,SAAL,EAAgB;MACd;IACD;;IAEDT,KAAK,CAACM,IAAD,CAAL,GAAcG,SAAd;IACAR,OAAO,GAAG,IAAV;EACD,CAhBD;;EAkBA,IAAIA,OAAJ,EAAa;IACXd,GAAG,CAACC,GAAJ,GAAUY,KAAV;EACD,CAFD,MAEO;IACL,OAAOb,GAAG,CAACC,GAAX;EACD;;EAED,OAAOD,GAAP;AACD,CA7BD;;AA+BAuB,MAAM,CAACC,OAAP,GAAiBzB,SAAjB"},"metadata":{},"sourceType":"script"}