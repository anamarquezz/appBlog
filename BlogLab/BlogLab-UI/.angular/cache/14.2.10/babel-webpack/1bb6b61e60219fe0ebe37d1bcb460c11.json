{"ast":null,"code":"const runningProcs = new Set();\nlet handlersInstalled = false;\nconst forwardedSignals = ['SIGINT', 'SIGTERM'];\n\nconst handleSignal = signal => {\n  for (const proc of runningProcs) {\n    proc.kill(signal);\n  }\n};\n\nconst setupListeners = () => {\n  for (const signal of forwardedSignals) {\n    process.on(signal, handleSignal);\n  }\n\n  handlersInstalled = true;\n};\n\nconst cleanupListeners = () => {\n  if (runningProcs.size === 0) {\n    for (const signal of forwardedSignals) {\n      process.removeListener(signal, handleSignal);\n    }\n\n    handlersInstalled = false;\n  }\n};\n\nconst add = proc => {\n  runningProcs.add(proc);\n\n  if (!handlersInstalled) {\n    setupListeners();\n  }\n\n  proc.once('exit', () => {\n    runningProcs.delete(proc);\n    cleanupListeners();\n  });\n};\n\nmodule.exports = {\n  add,\n  handleSignal,\n  forwardedSignals\n};","map":{"version":3,"names":["runningProcs","Set","handlersInstalled","forwardedSignals","handleSignal","signal","proc","kill","setupListeners","process","on","cleanupListeners","size","removeListener","add","once","delete","module","exports"],"sources":["C:/sources/GitHub/appBlog/BlogLab/BlogLab-UI/node_modules/@npmcli/run-script/lib/signal-manager.js"],"sourcesContent":["const runningProcs = new Set()\nlet handlersInstalled = false\n\nconst forwardedSignals = [\n  'SIGINT',\n  'SIGTERM',\n]\n\nconst handleSignal = signal => {\n  for (const proc of runningProcs) {\n    proc.kill(signal)\n  }\n}\n\nconst setupListeners = () => {\n  for (const signal of forwardedSignals) {\n    process.on(signal, handleSignal)\n  }\n  handlersInstalled = true\n}\n\nconst cleanupListeners = () => {\n  if (runningProcs.size === 0) {\n    for (const signal of forwardedSignals) {\n      process.removeListener(signal, handleSignal)\n    }\n    handlersInstalled = false\n  }\n}\n\nconst add = proc => {\n  runningProcs.add(proc)\n  if (!handlersInstalled) {\n    setupListeners()\n  }\n\n  proc.once('exit', () => {\n    runningProcs.delete(proc)\n    cleanupListeners()\n  })\n}\n\nmodule.exports = {\n  add,\n  handleSignal,\n  forwardedSignals,\n}\n"],"mappings":"AAAA,MAAMA,YAAY,GAAG,IAAIC,GAAJ,EAArB;AACA,IAAIC,iBAAiB,GAAG,KAAxB;AAEA,MAAMC,gBAAgB,GAAG,CACvB,QADuB,EAEvB,SAFuB,CAAzB;;AAKA,MAAMC,YAAY,GAAGC,MAAM,IAAI;EAC7B,KAAK,MAAMC,IAAX,IAAmBN,YAAnB,EAAiC;IAC/BM,IAAI,CAACC,IAAL,CAAUF,MAAV;EACD;AACF,CAJD;;AAMA,MAAMG,cAAc,GAAG,MAAM;EAC3B,KAAK,MAAMH,MAAX,IAAqBF,gBAArB,EAAuC;IACrCM,OAAO,CAACC,EAAR,CAAWL,MAAX,EAAmBD,YAAnB;EACD;;EACDF,iBAAiB,GAAG,IAApB;AACD,CALD;;AAOA,MAAMS,gBAAgB,GAAG,MAAM;EAC7B,IAAIX,YAAY,CAACY,IAAb,KAAsB,CAA1B,EAA6B;IAC3B,KAAK,MAAMP,MAAX,IAAqBF,gBAArB,EAAuC;MACrCM,OAAO,CAACI,cAAR,CAAuBR,MAAvB,EAA+BD,YAA/B;IACD;;IACDF,iBAAiB,GAAG,KAApB;EACD;AACF,CAPD;;AASA,MAAMY,GAAG,GAAGR,IAAI,IAAI;EAClBN,YAAY,CAACc,GAAb,CAAiBR,IAAjB;;EACA,IAAI,CAACJ,iBAAL,EAAwB;IACtBM,cAAc;EACf;;EAEDF,IAAI,CAACS,IAAL,CAAU,MAAV,EAAkB,MAAM;IACtBf,YAAY,CAACgB,MAAb,CAAoBV,IAApB;IACAK,gBAAgB;EACjB,CAHD;AAID,CAVD;;AAYAM,MAAM,CAACC,OAAP,GAAiB;EACfJ,GADe;EAEfV,YAFe;EAGfD;AAHe,CAAjB"},"metadata":{},"sourceType":"script"}