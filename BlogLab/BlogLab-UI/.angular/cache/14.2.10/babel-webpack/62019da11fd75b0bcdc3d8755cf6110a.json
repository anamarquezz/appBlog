{"ast":null,"code":"const spawn = require('@npmcli/promise-spawn');\n\nconst promiseRetry = require('promise-retry');\n\nconst log = require('proc-log');\n\nconst makeError = require('./make-error.js');\n\nconst whichGit = require('./which.js');\n\nconst makeOpts = require('./opts.js');\n\nmodule.exports = (gitArgs, opts = {}) => {\n  const gitPath = whichGit(opts);\n\n  if (gitPath instanceof Error) {\n    return Promise.reject(gitPath);\n  } // undocumented option, mostly only here for tests\n\n\n  const args = opts.allowReplace || gitArgs[0] === '--no-replace-objects' ? gitArgs : ['--no-replace-objects', ...gitArgs];\n  let retryOpts = opts.retry;\n\n  if (retryOpts === null || retryOpts === undefined) {\n    retryOpts = {\n      retries: opts.fetchRetries || 2,\n      factor: opts.fetchRetryFactor || 10,\n      maxTimeout: opts.fetchRetryMaxtimeout || 60000,\n      minTimeout: opts.fetchRetryMintimeout || 1000\n    };\n  }\n\n  return promiseRetry((retryFn, number) => {\n    if (number !== 1) {\n      log.silly('git', `Retrying git command: ${args.join(' ')} attempt # ${number}`);\n    }\n\n    return spawn(gitPath, args, makeOpts(opts)).catch(er => {\n      const gitError = makeError(er);\n\n      if (!gitError.shouldRetry(number)) {\n        throw gitError;\n      }\n\n      retryFn(gitError);\n    });\n  }, retryOpts);\n};","map":{"version":3,"names":["spawn","require","promiseRetry","log","makeError","whichGit","makeOpts","module","exports","gitArgs","opts","gitPath","Error","Promise","reject","args","allowReplace","retryOpts","retry","undefined","retries","fetchRetries","factor","fetchRetryFactor","maxTimeout","fetchRetryMaxtimeout","minTimeout","fetchRetryMintimeout","retryFn","number","silly","join","catch","er","gitError","shouldRetry"],"sources":["C:/sources/GitHub/appBlog/BlogLab/BlogLab-UI/node_modules/@npmcli/git/lib/spawn.js"],"sourcesContent":["const spawn = require('@npmcli/promise-spawn')\nconst promiseRetry = require('promise-retry')\nconst log = require('proc-log')\nconst makeError = require('./make-error.js')\nconst whichGit = require('./which.js')\nconst makeOpts = require('./opts.js')\n\nmodule.exports = (gitArgs, opts = {}) => {\n  const gitPath = whichGit(opts)\n\n  if (gitPath instanceof Error) {\n    return Promise.reject(gitPath)\n  }\n\n  // undocumented option, mostly only here for tests\n  const args = opts.allowReplace || gitArgs[0] === '--no-replace-objects'\n    ? gitArgs\n    : ['--no-replace-objects', ...gitArgs]\n\n  let retryOpts = opts.retry\n  if (retryOpts === null || retryOpts === undefined) {\n    retryOpts = {\n      retries: opts.fetchRetries || 2,\n      factor: opts.fetchRetryFactor || 10,\n      maxTimeout: opts.fetchRetryMaxtimeout || 60000,\n      minTimeout: opts.fetchRetryMintimeout || 1000,\n    }\n  }\n  return promiseRetry((retryFn, number) => {\n    if (number !== 1) {\n      log.silly('git', `Retrying git command: ${\n        args.join(' ')} attempt # ${number}`)\n    }\n\n    return spawn(gitPath, args, makeOpts(opts))\n      .catch(er => {\n        const gitError = makeError(er)\n        if (!gitError.shouldRetry(number)) {\n          throw gitError\n        }\n        retryFn(gitError)\n      })\n  }, retryOpts)\n}\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,uBAAD,CAArB;;AACA,MAAMC,YAAY,GAAGD,OAAO,CAAC,eAAD,CAA5B;;AACA,MAAME,GAAG,GAAGF,OAAO,CAAC,UAAD,CAAnB;;AACA,MAAMG,SAAS,GAAGH,OAAO,CAAC,iBAAD,CAAzB;;AACA,MAAMI,QAAQ,GAAGJ,OAAO,CAAC,YAAD,CAAxB;;AACA,MAAMK,QAAQ,GAAGL,OAAO,CAAC,WAAD,CAAxB;;AAEAM,MAAM,CAACC,OAAP,GAAiB,CAACC,OAAD,EAAUC,IAAI,GAAG,EAAjB,KAAwB;EACvC,MAAMC,OAAO,GAAGN,QAAQ,CAACK,IAAD,CAAxB;;EAEA,IAAIC,OAAO,YAAYC,KAAvB,EAA8B;IAC5B,OAAOC,OAAO,CAACC,MAAR,CAAeH,OAAf,CAAP;EACD,CALsC,CAOvC;;;EACA,MAAMI,IAAI,GAAGL,IAAI,CAACM,YAAL,IAAqBP,OAAO,CAAC,CAAD,CAAP,KAAe,sBAApC,GACTA,OADS,GAET,CAAC,sBAAD,EAAyB,GAAGA,OAA5B,CAFJ;EAIA,IAAIQ,SAAS,GAAGP,IAAI,CAACQ,KAArB;;EACA,IAAID,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAKE,SAAxC,EAAmD;IACjDF,SAAS,GAAG;MACVG,OAAO,EAAEV,IAAI,CAACW,YAAL,IAAqB,CADpB;MAEVC,MAAM,EAAEZ,IAAI,CAACa,gBAAL,IAAyB,EAFvB;MAGVC,UAAU,EAAEd,IAAI,CAACe,oBAAL,IAA6B,KAH/B;MAIVC,UAAU,EAAEhB,IAAI,CAACiB,oBAAL,IAA6B;IAJ/B,CAAZ;EAMD;;EACD,OAAOzB,YAAY,CAAC,CAAC0B,OAAD,EAAUC,MAAV,KAAqB;IACvC,IAAIA,MAAM,KAAK,CAAf,EAAkB;MAChB1B,GAAG,CAAC2B,KAAJ,CAAU,KAAV,EAAkB,yBAChBf,IAAI,CAACgB,IAAL,CAAU,GAAV,CAAe,cAAaF,MAAO,EADrC;IAED;;IAED,OAAO7B,KAAK,CAACW,OAAD,EAAUI,IAAV,EAAgBT,QAAQ,CAACI,IAAD,CAAxB,CAAL,CACJsB,KADI,CACEC,EAAE,IAAI;MACX,MAAMC,QAAQ,GAAG9B,SAAS,CAAC6B,EAAD,CAA1B;;MACA,IAAI,CAACC,QAAQ,CAACC,WAAT,CAAqBN,MAArB,CAAL,EAAmC;QACjC,MAAMK,QAAN;MACD;;MACDN,OAAO,CAACM,QAAD,CAAP;IACD,CAPI,CAAP;EAQD,CAdkB,EAchBjB,SAdgB,CAAnB;AAeD,CApCD"},"metadata":{},"sourceType":"script"}