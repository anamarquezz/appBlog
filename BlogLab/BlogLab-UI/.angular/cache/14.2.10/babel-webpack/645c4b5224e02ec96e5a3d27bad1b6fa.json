{"ast":null,"code":"var fs = require('fs');\n\nvar path = require('path');\n\nvar glob = require('glob');\n\nvar normalizeData = require('normalize-package-data');\n\nvar safeJSON = require('json-parse-even-better-errors');\n\nvar util = require('util');\n\nvar normalizePackageBin = require('npm-normalize-package-bin');\n\nmodule.exports = readJson; // put more stuff on here to customize.\n\nreadJson.extraSet = [bundleDependencies, gypfile, serverjs, scriptpath, authors, readme, mans, bins, githead, fillTypes];\nvar typoWarned = {};\nvar cache = {};\n\nfunction readJson(file, log_, strict_, cb_) {\n  var log, strict, cb;\n\n  for (var i = 1; i < arguments.length - 1; i++) {\n    if (typeof arguments[i] === 'boolean') {\n      strict = arguments[i];\n    } else if (typeof arguments[i] === 'function') {\n      log = arguments[i];\n    }\n  }\n\n  if (!log) {\n    log = function () {};\n  }\n\n  cb = arguments[arguments.length - 1];\n  readJson_(file, log, strict, cb);\n}\n\nfunction readJson_(file, log, strict, cb) {\n  fs.readFile(file, 'utf8', function (er, d) {\n    parseJson(file, er, d, log, strict, cb);\n  });\n}\n\nfunction stripBOM(content) {\n  // Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n  // because the buffer-to-string conversion in `fs.readFileSync()`\n  // translates it to FEFF, the UTF-16 BOM.\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n\n  return content;\n}\n\nfunction jsonClone(obj) {\n  if (obj == null) {\n    return obj;\n  } else if (Array.isArray(obj)) {\n    var newarr = new Array(obj.length);\n\n    for (var ii in obj) {\n      newarr[ii] = obj[ii];\n    }\n  } else if (typeof obj === 'object') {\n    var newobj = {};\n\n    for (var kk in obj) {\n      newobj[kk] = jsonClone[kk];\n    }\n  } else {\n    return obj;\n  }\n}\n\nfunction parseJson(file, er, d, log, strict, cb) {\n  if (er && er.code === 'ENOENT') {\n    return fs.stat(path.dirname(file), function (err, stat) {\n      if (!err && stat && !stat.isDirectory()) {\n        // ENOTDIR isn't used on Windows, but npm expects it.\n        er = Object.create(er);\n        er.code = 'ENOTDIR';\n        return cb(er);\n      } else {\n        return indexjs(file, er, log, strict, cb);\n      }\n    });\n  }\n\n  if (er) {\n    return cb(er);\n  }\n\n  if (cache[d]) {\n    return cb(null, jsonClone(cache[d]));\n  }\n\n  var data;\n\n  try {\n    data = safeJSON(stripBOM(d));\n\n    for (var key in data) {\n      if (/^_/.test(key)) {\n        delete data[key];\n      }\n    }\n  } catch (jsonErr) {\n    data = parseIndex(d);\n\n    if (!data) {\n      return cb(parseError(jsonErr, file));\n    }\n  }\n\n  extrasCached(file, d, data, log, strict, cb);\n}\n\nfunction extrasCached(file, d, data, log, strict, cb) {\n  extras(file, data, log, strict, function (err, extrasData) {\n    if (!err) {\n      cache[d] = jsonClone(extrasData);\n    }\n\n    cb(err, extrasData);\n  });\n}\n\nfunction indexjs(file, er, log, strict, cb) {\n  if (path.basename(file) === 'index.js') {\n    return cb(er);\n  }\n\n  var index = path.resolve(path.dirname(file), 'index.js');\n  fs.readFile(index, 'utf8', function (er2, d) {\n    if (er2) {\n      return cb(er);\n    }\n\n    if (cache[d]) {\n      return cb(null, cache[d]);\n    }\n\n    var data = parseIndex(d);\n\n    if (!data) {\n      return cb(er);\n    }\n\n    extrasCached(file, d, data, log, strict, cb);\n  });\n}\n\nreadJson.extras = extras;\n\nfunction extras(file, data, log_, strict_, cb_) {\n  var log, strict, cb;\n\n  for (var i = 2; i < arguments.length - 1; i++) {\n    if (typeof arguments[i] === 'boolean') {\n      strict = arguments[i];\n    } else if (typeof arguments[i] === 'function') {\n      log = arguments[i];\n    }\n  }\n\n  if (!log) {\n    log = function () {};\n  }\n\n  cb = arguments[i];\n  var set = readJson.extraSet;\n  var n = set.length;\n  var errState = null;\n  set.forEach(function (fn) {\n    fn(file, data, then);\n  });\n\n  function then(er) {\n    if (errState) {\n      return;\n    }\n\n    if (er) {\n      return cb(errState = er);\n    }\n\n    if (--n > 0) {\n      return;\n    }\n\n    final(file, data, log, strict, cb);\n  }\n}\n\nfunction scriptpath(file, data, cb) {\n  if (!data.scripts) {\n    return cb(null, data);\n  }\n\n  var k = Object.keys(data.scripts);\n  k.forEach(scriptpath_, data.scripts);\n  cb(null, data);\n}\n\nfunction scriptpath_(key) {\n  var s = this[key]; // This is never allowed, and only causes problems\n\n  if (typeof s !== 'string') {\n    return delete this[key];\n  }\n\n  var spre = /^(\\.[/\\\\])?node_modules[/\\\\].bin[\\\\/]/;\n\n  if (s.match(spre)) {\n    this[key] = this[key].replace(spre, '');\n  }\n}\n\nfunction gypfile(file, data, cb) {\n  var dir = path.dirname(file);\n  var s = data.scripts || {};\n\n  if (s.install || s.preinstall) {\n    return cb(null, data);\n  }\n\n  glob('*.gyp', {\n    cwd: dir\n  }, function (er, files) {\n    if (er) {\n      return cb(er);\n    }\n\n    if (data.gypfile === false) {\n      return cb(null, data);\n    }\n\n    gypfile_(file, data, files, cb);\n  });\n}\n\nfunction gypfile_(file, data, files, cb) {\n  if (!files.length) {\n    return cb(null, data);\n  }\n\n  var s = data.scripts || {};\n  s.install = 'node-gyp rebuild';\n  data.scripts = s;\n  data.gypfile = true;\n  return cb(null, data);\n}\n\nfunction serverjs(file, data, cb) {\n  var dir = path.dirname(file);\n  var s = data.scripts || {};\n\n  if (s.start) {\n    return cb(null, data);\n  }\n\n  glob('server.js', {\n    cwd: dir\n  }, function (er, files) {\n    if (er) {\n      return cb(er);\n    }\n\n    serverjs_(file, data, files, cb);\n  });\n}\n\nfunction serverjs_(file, data, files, cb) {\n  if (!files.length) {\n    return cb(null, data);\n  }\n\n  var s = data.scripts || {};\n  s.start = 'node server.js';\n  data.scripts = s;\n  return cb(null, data);\n}\n\nfunction authors(file, data, cb) {\n  if (data.contributors) {\n    return cb(null, data);\n  }\n\n  var af = path.resolve(path.dirname(file), 'AUTHORS');\n  fs.readFile(af, 'utf8', function (er, ad) {\n    // ignore error.  just checking it.\n    if (er) {\n      return cb(null, data);\n    }\n\n    authors_(file, data, ad, cb);\n  });\n}\n\nfunction authors_(file, data, ad, cb) {\n  ad = ad.split(/\\r?\\n/g).map(function (line) {\n    return line.replace(/^\\s*#.*$/, '').trim();\n  }).filter(function (line) {\n    return line;\n  });\n  data.contributors = ad;\n  return cb(null, data);\n}\n\nfunction readme(file, data, cb) {\n  if (data.readme) {\n    return cb(null, data);\n  }\n\n  var dir = path.dirname(file);\n  var globOpts = {\n    cwd: dir,\n    nocase: true,\n    mark: true\n  };\n  glob('{README,README.*}', globOpts, function (er, files) {\n    if (er) {\n      return cb(er);\n    } // don't accept directories.\n\n\n    files = files.filter(function (filtered) {\n      return !filtered.match(/\\/$/);\n    });\n\n    if (!files.length) {\n      return cb();\n    }\n\n    var fn = preferMarkdownReadme(files);\n    var rm = path.resolve(dir, fn);\n    readme_(file, data, rm, cb);\n  });\n}\n\nfunction preferMarkdownReadme(files) {\n  var fallback = 0;\n  var re = /\\.m?a?r?k?d?o?w?n?$/i;\n\n  for (var i = 0; i < files.length; i++) {\n    if (files[i].match(re)) {\n      return files[i];\n    } else if (files[i].match(/README$/)) {\n      fallback = i;\n    }\n  } // prefer README.md, followed by README; otherwise, return\n  // the first filename (which could be README)\n\n\n  return files[fallback];\n}\n\nfunction readme_(file, data, rm, cb) {\n  var rmfn = path.basename(rm);\n  fs.readFile(rm, 'utf8', function (er, rmData) {\n    // maybe not readable, or something.\n    if (er) {\n      return cb();\n    }\n\n    data.readme = rmData;\n    data.readmeFilename = rmfn;\n    return cb(er, data);\n  });\n}\n\nfunction mans(file, data, cb) {\n  let cwd = data.directories && data.directories.man;\n\n  if (data.man || !cwd) {\n    return cb(null, data);\n  }\n\n  const dirname = path.dirname(file);\n  cwd = path.resolve(path.dirname(file), cwd);\n  glob('**/*.[0-9]', {\n    cwd\n  }, function (er, mansGlob) {\n    if (er) {\n      return cb(er);\n    }\n\n    data.man = mansGlob.map(man => path.relative(dirname, path.join(cwd, man)).split(path.sep).join('/'));\n    return cb(null, data);\n  });\n}\n\nfunction bins(file, data, cb) {\n  data = normalizePackageBin(data);\n  var m = data.directories && data.directories.bin;\n\n  if (data.bin || !m) {\n    return cb(null, data);\n  }\n\n  m = path.resolve(path.dirname(file), m);\n  glob('**', {\n    cwd: m\n  }, function (er, binsGlob) {\n    if (er) {\n      return cb(er);\n    }\n\n    bins_(file, data, binsGlob, cb);\n  });\n}\n\nfunction bins_(file, data, binsGlob, cb) {\n  var m = data.directories && data.directories.bin || '.';\n  data.bin = binsGlob.reduce(function (acc, mf) {\n    if (mf && mf.charAt(0) !== '.') {\n      var f = path.basename(mf);\n      acc[f] = path.join(m, mf);\n    }\n\n    return acc;\n  }, {});\n  return cb(null, normalizePackageBin(data));\n}\n\nfunction bundleDependencies(file, data, cb) {\n  var bd = 'bundleDependencies';\n  var bdd = 'bundledDependencies'; // normalize key name\n\n  if (data[bdd] !== undefined) {\n    if (data[bd] === undefined) {\n      data[bd] = data[bdd];\n    }\n\n    delete data[bdd];\n  }\n\n  if (data[bd] === false) {\n    delete data[bd];\n  } else if (data[bd] === true) {\n    data[bd] = Object.keys(data.dependencies || {});\n  } else if (data[bd] !== undefined && !Array.isArray(data[bd])) {\n    delete data[bd];\n  }\n\n  return cb(null, data);\n}\n\nfunction githead(file, data, cb) {\n  if (data.gitHead) {\n    return cb(null, data);\n  }\n\n  var dir = path.dirname(file);\n  var head = path.resolve(dir, '.git/HEAD');\n  fs.readFile(head, 'utf8', function (er, headData) {\n    if (er) {\n      var parent = path.dirname(dir);\n\n      if (parent === dir) {\n        return cb(null, data);\n      }\n\n      return githead(dir, data, cb);\n    }\n\n    githead_(data, dir, headData, cb);\n  });\n}\n\nfunction githead_(data, dir, head, cb) {\n  if (!head.match(/^ref: /)) {\n    data.gitHead = head.trim();\n    return cb(null, data);\n  }\n\n  var headRef = head.replace(/^ref: /, '').trim();\n  var headFile = path.resolve(dir, '.git', headRef);\n  fs.readFile(headFile, 'utf8', function (er, headData) {\n    if (er || !headData) {\n      var packFile = path.resolve(dir, '.git/packed-refs');\n      return fs.readFile(packFile, 'utf8', function (readFileErr, refs) {\n        if (readFileErr || !refs) {\n          return cb(null, data);\n        }\n\n        refs = refs.split('\\n');\n\n        for (var i = 0; i < refs.length; i++) {\n          var match = refs[i].match(/^([0-9a-f]{40}) (.+)$/);\n\n          if (match && match[2].trim() === headRef) {\n            data.gitHead = match[1];\n            break;\n          }\n        }\n\n        return cb(null, data);\n      });\n    }\n\n    headData = headData.replace(/^ref: /, '').trim();\n    data.gitHead = headData;\n    return cb(null, data);\n  });\n}\n/**\n * Warn if the bin references don't point to anything.  This might be better in\n * normalize-package-data if it had access to the file path.\n */\n\n\nfunction checkBinReferences_(file, data, warn, cb) {\n  if (!(data.bin instanceof Object)) {\n    return cb();\n  }\n\n  var keys = Object.keys(data.bin);\n  var keysLeft = keys.length;\n\n  if (!keysLeft) {\n    return cb();\n  }\n\n  function handleExists(relName, result) {\n    keysLeft--;\n\n    if (!result) {\n      warn('No bin file found at ' + relName);\n    }\n\n    if (!keysLeft) {\n      cb();\n    }\n  }\n\n  keys.forEach(function (key) {\n    var dirName = path.dirname(file);\n    var relName = data.bin[key];\n    /* istanbul ignore if - impossible, bins have been normalized */\n\n    if (typeof relName !== 'string') {\n      var msg = 'Bin filename for ' + key + ' is not a string: ' + util.inspect(relName);\n      warn(msg);\n      delete data.bin[key];\n      handleExists(relName, true);\n      return;\n    }\n\n    var binPath = path.resolve(dirName, relName);\n    fs.stat(binPath, err => handleExists(relName, !err));\n  });\n}\n\nfunction final(file, data, log, strict, cb) {\n  var pId = makePackageId(data);\n\n  function warn(msg) {\n    if (typoWarned[pId]) {\n      return;\n    }\n\n    if (log) {\n      log('package.json', pId, msg);\n    }\n  }\n\n  try {\n    normalizeData(data, warn, strict);\n  } catch (error) {\n    return cb(error);\n  }\n\n  checkBinReferences_(file, data, warn, function () {\n    typoWarned[pId] = true;\n    cb(null, data);\n  });\n}\n\nfunction fillTypes(file, data, cb) {\n  var index = data.main ? data.main : 'index.js';\n\n  if (typeof index !== 'string') {\n    return cb(new TypeError('The \"main\" attribute must be of type string.'));\n  } // TODO exports is much more complicated than this in verbose format\n  // We need to support for instance\n  // \"exports\": {\n  //   \".\": [\n  //     {\n  //       \"default\": \"./lib/npm.js\"\n  //     },\n  //     \"./lib/npm.js\"\n  //   ],\n  //   \"./package.json\": \"./package.json\"\n  // },\n  // as well as conditional exports\n  // if (data.exports && typeof data.exports === 'string') {\n  //   index = data.exports\n  // }\n  // if (data.exports && data.exports['.']) {\n  //   index = data.exports['.']\n  //   if (typeof index !== 'string') {\n  //   }\n  // }\n\n\n  var extless = path.join(path.dirname(index), path.basename(index, path.extname(index)));\n  var dts = `./${extless}.d.ts`;\n  var dtsPath = path.join(path.dirname(file), dts);\n  var hasDTSFields = 'types' in data || 'typings' in data;\n\n  if (!hasDTSFields && fs.existsSync(dtsPath)) {\n    data.types = dts.split(path.sep).join('/');\n  }\n\n  cb(null, data);\n}\n\nfunction makePackageId(data) {\n  var name = cleanString(data.name);\n  var ver = cleanString(data.version);\n  return name + '@' + ver;\n}\n\nfunction cleanString(str) {\n  return !str || typeof str !== 'string' ? '' : str.trim();\n} // /**package { \"name\": \"foo\", \"version\": \"1.2.3\", ... } **/\n\n\nfunction parseIndex(data) {\n  data = data.split(/^\\/\\*\\*package(?:\\s|$)/m);\n\n  if (data.length < 2) {\n    return null;\n  }\n\n  data = data[1];\n  data = data.split(/\\*\\*\\/$/m);\n\n  if (data.length < 2) {\n    return null;\n  }\n\n  data = data[0];\n  data = data.replace(/^\\s*\\*/mg, '');\n\n  try {\n    return safeJSON(data);\n  } catch (er) {\n    return null;\n  }\n}\n\nfunction parseError(ex, file) {\n  var e = new Error('Failed to parse json\\n' + ex.message);\n  e.code = 'EJSONPARSE';\n  e.path = file;\n  return e;\n}","map":{"version":3,"names":["fs","require","path","glob","normalizeData","safeJSON","util","normalizePackageBin","module","exports","readJson","extraSet","bundleDependencies","gypfile","serverjs","scriptpath","authors","readme","mans","bins","githead","fillTypes","typoWarned","cache","file","log_","strict_","cb_","log","strict","cb","i","arguments","length","readJson_","readFile","er","d","parseJson","stripBOM","content","charCodeAt","slice","jsonClone","obj","Array","isArray","newarr","ii","newobj","kk","code","stat","dirname","err","isDirectory","Object","create","indexjs","data","key","test","jsonErr","parseIndex","parseError","extrasCached","extras","extrasData","basename","index","resolve","er2","set","n","errState","forEach","fn","then","final","scripts","k","keys","scriptpath_","s","spre","match","replace","dir","install","preinstall","cwd","files","gypfile_","start","serverjs_","contributors","af","ad","authors_","split","map","line","trim","filter","globOpts","nocase","mark","filtered","preferMarkdownReadme","rm","readme_","fallback","re","rmfn","rmData","readmeFilename","directories","man","mansGlob","relative","join","sep","m","bin","binsGlob","bins_","reduce","acc","mf","charAt","f","bd","bdd","undefined","dependencies","gitHead","head","headData","parent","githead_","headRef","headFile","packFile","readFileErr","refs","checkBinReferences_","warn","keysLeft","handleExists","relName","result","dirName","msg","inspect","binPath","pId","makePackageId","error","main","TypeError","extless","extname","dts","dtsPath","hasDTSFields","existsSync","types","name","cleanString","ver","version","str","ex","e","Error","message"],"sources":["C:/sources/GitHub/appBlog/BlogLab/BlogLab-UI/node_modules/read-package-json/lib/read-json.js"],"sourcesContent":["var fs = require('fs')\n\nvar path = require('path')\n\nvar glob = require('glob')\nvar normalizeData = require('normalize-package-data')\nvar safeJSON = require('json-parse-even-better-errors')\nvar util = require('util')\nvar normalizePackageBin = require('npm-normalize-package-bin')\n\nmodule.exports = readJson\n\n// put more stuff on here to customize.\nreadJson.extraSet = [\n  bundleDependencies,\n  gypfile,\n  serverjs,\n  scriptpath,\n  authors,\n  readme,\n  mans,\n  bins,\n  githead,\n  fillTypes,\n]\n\nvar typoWarned = {}\nvar cache = {}\n\nfunction readJson (file, log_, strict_, cb_) {\n  var log, strict, cb\n  for (var i = 1; i < arguments.length - 1; i++) {\n    if (typeof arguments[i] === 'boolean') {\n      strict = arguments[i]\n    } else if (typeof arguments[i] === 'function') {\n      log = arguments[i]\n    }\n  }\n\n  if (!log) {\n    log = function () {}\n  }\n  cb = arguments[arguments.length - 1]\n\n  readJson_(file, log, strict, cb)\n}\n\nfunction readJson_ (file, log, strict, cb) {\n  fs.readFile(file, 'utf8', function (er, d) {\n    parseJson(file, er, d, log, strict, cb)\n  })\n}\n\nfunction stripBOM (content) {\n  // Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n  // because the buffer-to-string conversion in `fs.readFileSync()`\n  // translates it to FEFF, the UTF-16 BOM.\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1)\n  }\n  return content\n}\n\nfunction jsonClone (obj) {\n  if (obj == null) {\n    return obj\n  } else if (Array.isArray(obj)) {\n    var newarr = new Array(obj.length)\n    for (var ii in obj) {\n      newarr[ii] = obj[ii]\n    }\n  } else if (typeof obj === 'object') {\n    var newobj = {}\n    for (var kk in obj) {\n      newobj[kk] = jsonClone[kk]\n    }\n  } else {\n    return obj\n  }\n}\n\nfunction parseJson (file, er, d, log, strict, cb) {\n  if (er && er.code === 'ENOENT') {\n    return fs.stat(path.dirname(file), function (err, stat) {\n      if (!err && stat && !stat.isDirectory()) {\n        // ENOTDIR isn't used on Windows, but npm expects it.\n        er = Object.create(er)\n        er.code = 'ENOTDIR'\n        return cb(er)\n      } else {\n        return indexjs(file, er, log, strict, cb)\n      }\n    })\n  }\n  if (er) {\n    return cb(er)\n  }\n\n  if (cache[d]) {\n    return cb(null, jsonClone(cache[d]))\n  }\n\n  var data\n\n  try {\n    data = safeJSON(stripBOM(d))\n    for (var key in data) {\n      if (/^_/.test(key)) {\n        delete data[key]\n      }\n    }\n  } catch (jsonErr) {\n    data = parseIndex(d)\n    if (!data) {\n      return cb(parseError(jsonErr, file))\n    }\n  }\n\n  extrasCached(file, d, data, log, strict, cb)\n}\n\nfunction extrasCached (file, d, data, log, strict, cb) {\n  extras(file, data, log, strict, function (err, extrasData) {\n    if (!err) {\n      cache[d] = jsonClone(extrasData)\n    }\n    cb(err, extrasData)\n  })\n}\n\nfunction indexjs (file, er, log, strict, cb) {\n  if (path.basename(file) === 'index.js') {\n    return cb(er)\n  }\n\n  var index = path.resolve(path.dirname(file), 'index.js')\n  fs.readFile(index, 'utf8', function (er2, d) {\n    if (er2) {\n      return cb(er)\n    }\n\n    if (cache[d]) {\n      return cb(null, cache[d])\n    }\n\n    var data = parseIndex(d)\n    if (!data) {\n      return cb(er)\n    }\n\n    extrasCached(file, d, data, log, strict, cb)\n  })\n}\n\nreadJson.extras = extras\nfunction extras (file, data, log_, strict_, cb_) {\n  var log, strict, cb\n  for (var i = 2; i < arguments.length - 1; i++) {\n    if (typeof arguments[i] === 'boolean') {\n      strict = arguments[i]\n    } else if (typeof arguments[i] === 'function') {\n      log = arguments[i]\n    }\n  }\n\n  if (!log) {\n    log = function () {}\n  }\n  cb = arguments[i]\n\n  var set = readJson.extraSet\n  var n = set.length\n  var errState = null\n  set.forEach(function (fn) {\n    fn(file, data, then)\n  })\n\n  function then (er) {\n    if (errState) {\n      return\n    }\n    if (er) {\n      return cb(errState = er)\n    }\n    if (--n > 0) {\n      return\n    }\n    final(file, data, log, strict, cb)\n  }\n}\n\nfunction scriptpath (file, data, cb) {\n  if (!data.scripts) {\n    return cb(null, data)\n  }\n  var k = Object.keys(data.scripts)\n  k.forEach(scriptpath_, data.scripts)\n  cb(null, data)\n}\n\nfunction scriptpath_ (key) {\n  var s = this[key]\n  // This is never allowed, and only causes problems\n  if (typeof s !== 'string') {\n    return delete this[key]\n  }\n\n  var spre = /^(\\.[/\\\\])?node_modules[/\\\\].bin[\\\\/]/\n  if (s.match(spre)) {\n    this[key] = this[key].replace(spre, '')\n  }\n}\n\nfunction gypfile (file, data, cb) {\n  var dir = path.dirname(file)\n  var s = data.scripts || {}\n  if (s.install || s.preinstall) {\n    return cb(null, data)\n  }\n\n  glob('*.gyp', { cwd: dir }, function (er, files) {\n    if (er) {\n      return cb(er)\n    }\n    if (data.gypfile === false) {\n      return cb(null, data)\n    }\n    gypfile_(file, data, files, cb)\n  })\n}\n\nfunction gypfile_ (file, data, files, cb) {\n  if (!files.length) {\n    return cb(null, data)\n  }\n  var s = data.scripts || {}\n  s.install = 'node-gyp rebuild'\n  data.scripts = s\n  data.gypfile = true\n  return cb(null, data)\n}\n\nfunction serverjs (file, data, cb) {\n  var dir = path.dirname(file)\n  var s = data.scripts || {}\n  if (s.start) {\n    return cb(null, data)\n  }\n  glob('server.js', { cwd: dir }, function (er, files) {\n    if (er) {\n      return cb(er)\n    }\n    serverjs_(file, data, files, cb)\n  })\n}\n\nfunction serverjs_ (file, data, files, cb) {\n  if (!files.length) {\n    return cb(null, data)\n  }\n  var s = data.scripts || {}\n  s.start = 'node server.js'\n  data.scripts = s\n  return cb(null, data)\n}\n\nfunction authors (file, data, cb) {\n  if (data.contributors) {\n    return cb(null, data)\n  }\n  var af = path.resolve(path.dirname(file), 'AUTHORS')\n  fs.readFile(af, 'utf8', function (er, ad) {\n    // ignore error.  just checking it.\n    if (er) {\n      return cb(null, data)\n    }\n    authors_(file, data, ad, cb)\n  })\n}\n\nfunction authors_ (file, data, ad, cb) {\n  ad = ad.split(/\\r?\\n/g).map(function (line) {\n    return line.replace(/^\\s*#.*$/, '').trim()\n  }).filter(function (line) {\n    return line\n  })\n  data.contributors = ad\n  return cb(null, data)\n}\n\nfunction readme (file, data, cb) {\n  if (data.readme) {\n    return cb(null, data)\n  }\n  var dir = path.dirname(file)\n  var globOpts = { cwd: dir, nocase: true, mark: true }\n  glob('{README,README.*}', globOpts, function (er, files) {\n    if (er) {\n      return cb(er)\n    }\n    // don't accept directories.\n    files = files.filter(function (filtered) {\n      return !filtered.match(/\\/$/)\n    })\n    if (!files.length) {\n      return cb()\n    }\n    var fn = preferMarkdownReadme(files)\n    var rm = path.resolve(dir, fn)\n    readme_(file, data, rm, cb)\n  })\n}\n\nfunction preferMarkdownReadme (files) {\n  var fallback = 0\n  var re = /\\.m?a?r?k?d?o?w?n?$/i\n  for (var i = 0; i < files.length; i++) {\n    if (files[i].match(re)) {\n      return files[i]\n    } else if (files[i].match(/README$/)) {\n      fallback = i\n    }\n  }\n  // prefer README.md, followed by README; otherwise, return\n  // the first filename (which could be README)\n  return files[fallback]\n}\n\nfunction readme_ (file, data, rm, cb) {\n  var rmfn = path.basename(rm)\n  fs.readFile(rm, 'utf8', function (er, rmData) {\n    // maybe not readable, or something.\n    if (er) {\n      return cb()\n    }\n    data.readme = rmData\n    data.readmeFilename = rmfn\n    return cb(er, data)\n  })\n}\n\nfunction mans (file, data, cb) {\n  let cwd = data.directories && data.directories.man\n  if (data.man || !cwd) {\n    return cb(null, data)\n  }\n  const dirname = path.dirname(file)\n  cwd = path.resolve(path.dirname(file), cwd)\n  glob('**/*.[0-9]', { cwd }, function (er, mansGlob) {\n    if (er) {\n      return cb(er)\n    }\n    data.man = mansGlob.map(man =>\n      path.relative(dirname, path.join(cwd, man)).split(path.sep).join('/')\n    )\n    return cb(null, data)\n  })\n}\n\nfunction bins (file, data, cb) {\n  data = normalizePackageBin(data)\n\n  var m = data.directories && data.directories.bin\n  if (data.bin || !m) {\n    return cb(null, data)\n  }\n\n  m = path.resolve(path.dirname(file), m)\n  glob('**', { cwd: m }, function (er, binsGlob) {\n    if (er) {\n      return cb(er)\n    }\n    bins_(file, data, binsGlob, cb)\n  })\n}\n\nfunction bins_ (file, data, binsGlob, cb) {\n  var m = (data.directories && data.directories.bin) || '.'\n  data.bin = binsGlob.reduce(function (acc, mf) {\n    if (mf && mf.charAt(0) !== '.') {\n      var f = path.basename(mf)\n      acc[f] = path.join(m, mf)\n    }\n    return acc\n  }, {})\n  return cb(null, normalizePackageBin(data))\n}\n\nfunction bundleDependencies (file, data, cb) {\n  var bd = 'bundleDependencies'\n  var bdd = 'bundledDependencies'\n  // normalize key name\n  if (data[bdd] !== undefined) {\n    if (data[bd] === undefined) {\n      data[bd] = data[bdd]\n    }\n    delete data[bdd]\n  }\n  if (data[bd] === false) {\n    delete data[bd]\n  } else if (data[bd] === true) {\n    data[bd] = Object.keys(data.dependencies || {})\n  } else if (data[bd] !== undefined && !Array.isArray(data[bd])) {\n    delete data[bd]\n  }\n  return cb(null, data)\n}\n\nfunction githead (file, data, cb) {\n  if (data.gitHead) {\n    return cb(null, data)\n  }\n  var dir = path.dirname(file)\n  var head = path.resolve(dir, '.git/HEAD')\n  fs.readFile(head, 'utf8', function (er, headData) {\n    if (er) {\n      var parent = path.dirname(dir)\n      if (parent === dir) {\n        return cb(null, data)\n      }\n      return githead(dir, data, cb)\n    }\n    githead_(data, dir, headData, cb)\n  })\n}\n\nfunction githead_ (data, dir, head, cb) {\n  if (!head.match(/^ref: /)) {\n    data.gitHead = head.trim()\n    return cb(null, data)\n  }\n  var headRef = head.replace(/^ref: /, '').trim()\n  var headFile = path.resolve(dir, '.git', headRef)\n  fs.readFile(headFile, 'utf8', function (er, headData) {\n    if (er || !headData) {\n      var packFile = path.resolve(dir, '.git/packed-refs')\n      return fs.readFile(packFile, 'utf8', function (readFileErr, refs) {\n        if (readFileErr || !refs) {\n          return cb(null, data)\n        }\n        refs = refs.split('\\n')\n        for (var i = 0; i < refs.length; i++) {\n          var match = refs[i].match(/^([0-9a-f]{40}) (.+)$/)\n          if (match && match[2].trim() === headRef) {\n            data.gitHead = match[1]\n            break\n          }\n        }\n        return cb(null, data)\n      })\n    }\n    headData = headData.replace(/^ref: /, '').trim()\n    data.gitHead = headData\n    return cb(null, data)\n  })\n}\n\n/**\n * Warn if the bin references don't point to anything.  This might be better in\n * normalize-package-data if it had access to the file path.\n */\nfunction checkBinReferences_ (file, data, warn, cb) {\n  if (!(data.bin instanceof Object)) {\n    return cb()\n  }\n\n  var keys = Object.keys(data.bin)\n  var keysLeft = keys.length\n  if (!keysLeft) {\n    return cb()\n  }\n\n  function handleExists (relName, result) {\n    keysLeft--\n    if (!result) {\n      warn('No bin file found at ' + relName)\n    }\n    if (!keysLeft) {\n      cb()\n    }\n  }\n\n  keys.forEach(function (key) {\n    var dirName = path.dirname(file)\n    var relName = data.bin[key]\n    /* istanbul ignore if - impossible, bins have been normalized */\n    if (typeof relName !== 'string') {\n      var msg = 'Bin filename for ' + key +\n        ' is not a string: ' + util.inspect(relName)\n      warn(msg)\n      delete data.bin[key]\n      handleExists(relName, true)\n      return\n    }\n    var binPath = path.resolve(dirName, relName)\n    fs.stat(binPath, (err) => handleExists(relName, !err))\n  })\n}\n\nfunction final (file, data, log, strict, cb) {\n  var pId = makePackageId(data)\n\n  function warn (msg) {\n    if (typoWarned[pId]) {\n      return\n    }\n    if (log) {\n      log('package.json', pId, msg)\n    }\n  }\n\n  try {\n    normalizeData(data, warn, strict)\n  } catch (error) {\n    return cb(error)\n  }\n\n  checkBinReferences_(file, data, warn, function () {\n    typoWarned[pId] = true\n    cb(null, data)\n  })\n}\n\nfunction fillTypes (file, data, cb) {\n  var index = data.main ? data.main : 'index.js'\n\n  if (typeof index !== 'string') {\n    return cb(new TypeError('The \"main\" attribute must be of type string.'))\n  }\n\n  // TODO exports is much more complicated than this in verbose format\n  // We need to support for instance\n\n  // \"exports\": {\n  //   \".\": [\n  //     {\n  //       \"default\": \"./lib/npm.js\"\n  //     },\n  //     \"./lib/npm.js\"\n  //   ],\n  //   \"./package.json\": \"./package.json\"\n  // },\n  // as well as conditional exports\n\n  // if (data.exports && typeof data.exports === 'string') {\n  //   index = data.exports\n  // }\n\n  // if (data.exports && data.exports['.']) {\n  //   index = data.exports['.']\n  //   if (typeof index !== 'string') {\n  //   }\n  // }\n\n  var extless =\n    path.join(path.dirname(index), path.basename(index, path.extname(index)))\n  var dts = `./${extless}.d.ts`\n  var dtsPath = path.join(path.dirname(file), dts)\n  var hasDTSFields = 'types' in data || 'typings' in data\n  if (!hasDTSFields && fs.existsSync(dtsPath)) {\n    data.types = dts.split(path.sep).join('/')\n  }\n\n  cb(null, data)\n}\n\nfunction makePackageId (data) {\n  var name = cleanString(data.name)\n  var ver = cleanString(data.version)\n  return name + '@' + ver\n}\n\nfunction cleanString (str) {\n  return (!str || typeof (str) !== 'string') ? '' : str.trim()\n}\n\n// /**package { \"name\": \"foo\", \"version\": \"1.2.3\", ... } **/\nfunction parseIndex (data) {\n  data = data.split(/^\\/\\*\\*package(?:\\s|$)/m)\n\n  if (data.length < 2) {\n    return null\n  }\n  data = data[1]\n  data = data.split(/\\*\\*\\/$/m)\n\n  if (data.length < 2) {\n    return null\n  }\n  data = data[0]\n  data = data.replace(/^\\s*\\*/mg, '')\n\n  try {\n    return safeJSON(data)\n  } catch (er) {\n    return null\n  }\n}\n\nfunction parseError (ex, file) {\n  var e = new Error('Failed to parse json\\n' + ex.message)\n  e.code = 'EJSONPARSE'\n  e.path = file\n  return e\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}