{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SimpleSinkBase = void 0;\n\nconst rxjs_1 = require(\"rxjs\");\n\nconst operators_1 = require(\"rxjs/operators\");\n\nconst exception_1 = require(\"../exception/exception\");\n\nconst action_1 = require(\"../tree/action\");\n\nconst Noop = function () {};\n\nclass SimpleSinkBase {\n  constructor() {\n    this.preCommitAction = Noop;\n    this.postCommitAction = Noop;\n    this.preCommit = Noop;\n    this.postCommit = Noop;\n  }\n\n  _fileAlreadyExistException(path) {\n    throw new exception_1.FileAlreadyExistException(path);\n  }\n\n  _fileDoesNotExistException(path) {\n    throw new exception_1.FileDoesNotExistException(path);\n  }\n\n  _validateOverwriteAction(action) {\n    return this._validateFileExists(action.path).pipe((0, operators_1.map)(b => {\n      if (!b) {\n        this._fileDoesNotExistException(action.path);\n      }\n    }));\n  }\n\n  _validateCreateAction(action) {\n    return this._validateFileExists(action.path).pipe((0, operators_1.map)(b => {\n      if (b) {\n        this._fileAlreadyExistException(action.path);\n      }\n    }));\n  }\n\n  _validateRenameAction(action) {\n    return this._validateFileExists(action.path).pipe((0, operators_1.map)(b => {\n      if (!b) {\n        this._fileDoesNotExistException(action.path);\n      }\n    }), (0, operators_1.mergeMap)(() => this._validateFileExists(action.to)), (0, operators_1.map)(b => {\n      if (b) {\n        this._fileAlreadyExistException(action.to);\n      }\n    }));\n  }\n\n  _validateDeleteAction(action) {\n    return this._validateFileExists(action.path).pipe((0, operators_1.map)(b => {\n      if (!b) {\n        this._fileDoesNotExistException(action.path);\n      }\n    }));\n  }\n\n  validateSingleAction(action) {\n    switch (action.kind) {\n      case 'o':\n        return this._validateOverwriteAction(action);\n\n      case 'c':\n        return this._validateCreateAction(action);\n\n      case 'r':\n        return this._validateRenameAction(action);\n\n      case 'd':\n        return this._validateDeleteAction(action);\n\n      default:\n        throw new action_1.UnknownActionException(action);\n    }\n  }\n\n  commitSingleAction(action) {\n    return (0, rxjs_1.concat)(this.validateSingleAction(action), new rxjs_1.Observable(observer => {\n      let committed = null;\n\n      switch (action.kind) {\n        case 'o':\n          committed = this._overwriteFile(action.path, action.content);\n          break;\n\n        case 'c':\n          committed = this._createFile(action.path, action.content);\n          break;\n\n        case 'r':\n          committed = this._renameFile(action.path, action.to);\n          break;\n\n        case 'd':\n          committed = this._deleteFile(action.path);\n          break;\n      }\n\n      if (committed) {\n        committed.subscribe(observer);\n      } else {\n        observer.complete();\n      }\n    })).pipe((0, operators_1.ignoreElements)());\n  }\n\n  commit(tree) {\n    const actions = (0, rxjs_1.from)(tree.actions);\n    return (0, rxjs_1.concat)(this.preCommit() || (0, rxjs_1.of)(null), (0, rxjs_1.defer)(() => actions).pipe((0, operators_1.concatMap)(action => {\n      const maybeAction = this.preCommitAction(action);\n\n      if ((0, rxjs_1.isObservable)(maybeAction) || isPromiseLike(maybeAction)) {\n        return maybeAction;\n      }\n\n      return (0, rxjs_1.of)(maybeAction || action);\n    }), (0, operators_1.concatMap)(action => {\n      return (0, rxjs_1.concat)(this.commitSingleAction(action).pipe((0, operators_1.ignoreElements)()), (0, rxjs_1.of)(action));\n    }), (0, operators_1.concatMap)(action => this.postCommitAction(action) || (0, rxjs_1.of)(null))), (0, rxjs_1.defer)(() => this._done()), (0, rxjs_1.defer)(() => this.postCommit() || (0, rxjs_1.of)(null))).pipe((0, operators_1.ignoreElements)());\n  }\n\n}\n\nexports.SimpleSinkBase = SimpleSinkBase;\n\nfunction isPromiseLike(value) {\n  return !!value && typeof value.then === 'function';\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","SimpleSinkBase","rxjs_1","require","operators_1","exception_1","action_1","Noop","constructor","preCommitAction","postCommitAction","preCommit","postCommit","_fileAlreadyExistException","path","FileAlreadyExistException","_fileDoesNotExistException","FileDoesNotExistException","_validateOverwriteAction","action","_validateFileExists","pipe","map","b","_validateCreateAction","_validateRenameAction","mergeMap","to","_validateDeleteAction","validateSingleAction","kind","UnknownActionException","commitSingleAction","concat","Observable","observer","committed","_overwriteFile","content","_createFile","_renameFile","_deleteFile","subscribe","complete","ignoreElements","commit","tree","actions","from","of","defer","concatMap","maybeAction","isObservable","isPromiseLike","_done","then"],"sources":["C:/sources/GitHub/appBlog/BlogLab/BlogLab-UI/node_modules/@angular-devkit/schematics/src/sink/sink.js"],"sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SimpleSinkBase = void 0;\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst exception_1 = require(\"../exception/exception\");\nconst action_1 = require(\"../tree/action\");\nconst Noop = function () { };\nclass SimpleSinkBase {\n    constructor() {\n        this.preCommitAction = Noop;\n        this.postCommitAction = Noop;\n        this.preCommit = Noop;\n        this.postCommit = Noop;\n    }\n    _fileAlreadyExistException(path) {\n        throw new exception_1.FileAlreadyExistException(path);\n    }\n    _fileDoesNotExistException(path) {\n        throw new exception_1.FileDoesNotExistException(path);\n    }\n    _validateOverwriteAction(action) {\n        return this._validateFileExists(action.path).pipe((0, operators_1.map)((b) => {\n            if (!b) {\n                this._fileDoesNotExistException(action.path);\n            }\n        }));\n    }\n    _validateCreateAction(action) {\n        return this._validateFileExists(action.path).pipe((0, operators_1.map)((b) => {\n            if (b) {\n                this._fileAlreadyExistException(action.path);\n            }\n        }));\n    }\n    _validateRenameAction(action) {\n        return this._validateFileExists(action.path).pipe((0, operators_1.map)((b) => {\n            if (!b) {\n                this._fileDoesNotExistException(action.path);\n            }\n        }), (0, operators_1.mergeMap)(() => this._validateFileExists(action.to)), (0, operators_1.map)((b) => {\n            if (b) {\n                this._fileAlreadyExistException(action.to);\n            }\n        }));\n    }\n    _validateDeleteAction(action) {\n        return this._validateFileExists(action.path).pipe((0, operators_1.map)((b) => {\n            if (!b) {\n                this._fileDoesNotExistException(action.path);\n            }\n        }));\n    }\n    validateSingleAction(action) {\n        switch (action.kind) {\n            case 'o':\n                return this._validateOverwriteAction(action);\n            case 'c':\n                return this._validateCreateAction(action);\n            case 'r':\n                return this._validateRenameAction(action);\n            case 'd':\n                return this._validateDeleteAction(action);\n            default:\n                throw new action_1.UnknownActionException(action);\n        }\n    }\n    commitSingleAction(action) {\n        return (0, rxjs_1.concat)(this.validateSingleAction(action), new rxjs_1.Observable((observer) => {\n            let committed = null;\n            switch (action.kind) {\n                case 'o':\n                    committed = this._overwriteFile(action.path, action.content);\n                    break;\n                case 'c':\n                    committed = this._createFile(action.path, action.content);\n                    break;\n                case 'r':\n                    committed = this._renameFile(action.path, action.to);\n                    break;\n                case 'd':\n                    committed = this._deleteFile(action.path);\n                    break;\n            }\n            if (committed) {\n                committed.subscribe(observer);\n            }\n            else {\n                observer.complete();\n            }\n        })).pipe((0, operators_1.ignoreElements)());\n    }\n    commit(tree) {\n        const actions = (0, rxjs_1.from)(tree.actions);\n        return (0, rxjs_1.concat)(this.preCommit() || (0, rxjs_1.of)(null), (0, rxjs_1.defer)(() => actions).pipe((0, operators_1.concatMap)((action) => {\n            const maybeAction = this.preCommitAction(action);\n            if ((0, rxjs_1.isObservable)(maybeAction) || isPromiseLike(maybeAction)) {\n                return maybeAction;\n            }\n            return (0, rxjs_1.of)(maybeAction || action);\n        }), (0, operators_1.concatMap)((action) => {\n            return (0, rxjs_1.concat)(this.commitSingleAction(action).pipe((0, operators_1.ignoreElements)()), (0, rxjs_1.of)(action));\n        }), (0, operators_1.concatMap)((action) => this.postCommitAction(action) || (0, rxjs_1.of)(null))), (0, rxjs_1.defer)(() => this._done()), (0, rxjs_1.defer)(() => this.postCommit() || (0, rxjs_1.of)(null))).pipe((0, operators_1.ignoreElements)());\n    }\n}\nexports.SimpleSinkBase = SimpleSinkBase;\nfunction isPromiseLike(value) {\n    return !!value && typeof value.then === 'function';\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}