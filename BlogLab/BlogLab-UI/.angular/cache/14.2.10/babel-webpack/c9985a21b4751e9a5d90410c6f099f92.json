{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.subscribeToWorkflow = void 0;\n\nconst core_1 = require(\"@angular-devkit/core\");\n\nconst color_1 = require(\"../../utilities/color\");\n\nfunction subscribeToWorkflow(workflow, logger) {\n  const files = new Set();\n  let error = false;\n  let logs = [];\n  const reporterSubscription = workflow.reporter.subscribe(event => {\n    // Strip leading slash to prevent confusion.\n    const eventPath = event.path.charAt(0) === '/' ? event.path.substring(1) : event.path;\n\n    switch (event.kind) {\n      case 'error':\n        error = true;\n        const desc = event.description == 'alreadyExist' ? 'already exists' : 'does not exist';\n        logger.error(`ERROR! ${eventPath} ${desc}.`);\n        break;\n\n      case 'update':\n        logs.push(core_1.tags.oneLine`\n              ${color_1.colors.cyan('UPDATE')} ${eventPath} (${event.content.length} bytes)\n            `);\n        files.add(eventPath);\n        break;\n\n      case 'create':\n        logs.push(core_1.tags.oneLine`\n              ${color_1.colors.green('CREATE')} ${eventPath} (${event.content.length} bytes)\n            `);\n        files.add(eventPath);\n        break;\n\n      case 'delete':\n        logs.push(`${color_1.colors.yellow('DELETE')} ${eventPath}`);\n        files.add(eventPath);\n        break;\n\n      case 'rename':\n        const eventToPath = event.to.charAt(0) === '/' ? event.to.substring(1) : event.to;\n        logs.push(`${color_1.colors.blue('RENAME')} ${eventPath} => ${eventToPath}`);\n        files.add(eventPath);\n        break;\n    }\n  });\n  const lifecycleSubscription = workflow.lifeCycle.subscribe(event => {\n    if (event.kind == 'end' || event.kind == 'post-tasks-start') {\n      if (!error) {\n        // Output the logging queue, no error happened.\n        logs.forEach(log => logger.info(log));\n      }\n\n      logs = [];\n      error = false;\n    }\n  });\n  return {\n    files,\n    error,\n    unsubscribe: () => {\n      reporterSubscription.unsubscribe();\n      lifecycleSubscription.unsubscribe();\n    }\n  };\n}\n\nexports.subscribeToWorkflow = subscribeToWorkflow;","map":{"version":3,"names":["Object","defineProperty","exports","value","subscribeToWorkflow","core_1","require","color_1","workflow","logger","files","Set","error","logs","reporterSubscription","reporter","subscribe","event","eventPath","path","charAt","substring","kind","desc","description","push","tags","oneLine","colors","cyan","content","length","add","green","yellow","eventToPath","to","blue","lifecycleSubscription","lifeCycle","forEach","log","info","unsubscribe"],"sources":["C:/sources/GitHub/appBlog/BlogLab/BlogLab-UI/node_modules/@angular/cli/src/command-builder/utilities/schematic-workflow.js"],"sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.subscribeToWorkflow = void 0;\nconst core_1 = require(\"@angular-devkit/core\");\nconst color_1 = require(\"../../utilities/color\");\nfunction subscribeToWorkflow(workflow, logger) {\n    const files = new Set();\n    let error = false;\n    let logs = [];\n    const reporterSubscription = workflow.reporter.subscribe((event) => {\n        // Strip leading slash to prevent confusion.\n        const eventPath = event.path.charAt(0) === '/' ? event.path.substring(1) : event.path;\n        switch (event.kind) {\n            case 'error':\n                error = true;\n                const desc = event.description == 'alreadyExist' ? 'already exists' : 'does not exist';\n                logger.error(`ERROR! ${eventPath} ${desc}.`);\n                break;\n            case 'update':\n                logs.push(core_1.tags.oneLine `\n              ${color_1.colors.cyan('UPDATE')} ${eventPath} (${event.content.length} bytes)\n            `);\n                files.add(eventPath);\n                break;\n            case 'create':\n                logs.push(core_1.tags.oneLine `\n              ${color_1.colors.green('CREATE')} ${eventPath} (${event.content.length} bytes)\n            `);\n                files.add(eventPath);\n                break;\n            case 'delete':\n                logs.push(`${color_1.colors.yellow('DELETE')} ${eventPath}`);\n                files.add(eventPath);\n                break;\n            case 'rename':\n                const eventToPath = event.to.charAt(0) === '/' ? event.to.substring(1) : event.to;\n                logs.push(`${color_1.colors.blue('RENAME')} ${eventPath} => ${eventToPath}`);\n                files.add(eventPath);\n                break;\n        }\n    });\n    const lifecycleSubscription = workflow.lifeCycle.subscribe((event) => {\n        if (event.kind == 'end' || event.kind == 'post-tasks-start') {\n            if (!error) {\n                // Output the logging queue, no error happened.\n                logs.forEach((log) => logger.info(log));\n            }\n            logs = [];\n            error = false;\n        }\n    });\n    return {\n        files,\n        error,\n        unsubscribe: () => {\n            reporterSubscription.unsubscribe();\n            lifecycleSubscription.unsubscribe();\n        },\n    };\n}\nexports.subscribeToWorkflow = subscribeToWorkflow;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}