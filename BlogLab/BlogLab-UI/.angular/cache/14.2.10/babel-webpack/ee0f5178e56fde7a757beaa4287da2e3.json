{"ast":null,"code":"const {\n  dirname,\n  resolve\n} = require('path');\n\nconst url = require('url');\n\nconst fs = require('../fs.js'); // given a path, find the owner of the nearest parent\n\n\nconst find = path => {\n  // if we have no getuid, permissions are irrelevant on this platform\n  if (!process.getuid) {\n    return {};\n  } // fs methods accept URL objects with a scheme of file: so we need to unwrap\n  // those into an actual path string before we can resolve it\n\n\n  const resolved = path != null && path.href && path.origin ? resolve(url.fileURLToPath(path)) : resolve(path);\n  let stat;\n\n  try {\n    stat = fs.lstatSync(resolved);\n  } finally {\n    // if we got a stat, return its contents\n    if (stat) {\n      return {\n        uid: stat.uid,\n        gid: stat.gid\n      };\n    } // try the parent directory\n\n\n    if (resolved !== dirname(resolved)) {\n      return find(dirname(resolved));\n    } // no more parents, never got a stat, just return an empty object\n\n\n    return {};\n  }\n}; // given a path, uid, and gid update the ownership of the path if necessary\n\n\nconst update = (path, uid, gid) => {\n  // nothing to update, just exit\n  if (uid === undefined && gid === undefined) {\n    return;\n  }\n\n  try {\n    // see if the permissions are already the same, if they are we don't\n    // need to do anything, so return early\n    const stat = fs.statSync(path);\n\n    if (uid === stat.uid && gid === stat.gid) {\n      return;\n    }\n  } catch {// ignore errors\n  }\n\n  try {\n    fs.chownSync(path, uid, gid);\n  } catch {// ignore errors\n  }\n}; // accepts a `path` and the `owner` property of an options object and normalizes\n// it into an object with numerical `uid` and `gid`\n\n\nconst validate = (path, input) => {\n  let uid;\n  let gid;\n\n  if (typeof input === 'string' || typeof input === 'number') {\n    uid = input;\n    gid = input;\n  } else if (input && typeof input === 'object') {\n    uid = input.uid;\n    gid = input.gid;\n  }\n\n  if (uid === 'inherit' || gid === 'inherit') {\n    const owner = find(path);\n\n    if (uid === 'inherit') {\n      uid = owner.uid;\n    }\n\n    if (gid === 'inherit') {\n      gid = owner.gid;\n    }\n  }\n\n  return {\n    uid,\n    gid\n  };\n};\n\nmodule.exports = {\n  find,\n  update,\n  validate\n};","map":{"version":3,"names":["dirname","resolve","require","url","fs","find","path","process","getuid","resolved","href","origin","fileURLToPath","stat","lstatSync","uid","gid","update","undefined","statSync","chownSync","validate","input","owner","module","exports"],"sources":["C:/sources/GitHub/appBlog/BlogLab/BlogLab-UI/node_modules/@npmcli/fs/lib/common/owner-sync.js"],"sourcesContent":["const { dirname, resolve } = require('path')\nconst url = require('url')\n\nconst fs = require('../fs.js')\n\n// given a path, find the owner of the nearest parent\nconst find = (path) => {\n  // if we have no getuid, permissions are irrelevant on this platform\n  if (!process.getuid) {\n    return {}\n  }\n\n  // fs methods accept URL objects with a scheme of file: so we need to unwrap\n  // those into an actual path string before we can resolve it\n  const resolved = path != null && path.href && path.origin\n    ? resolve(url.fileURLToPath(path))\n    : resolve(path)\n\n  let stat\n\n  try {\n    stat = fs.lstatSync(resolved)\n  } finally {\n    // if we got a stat, return its contents\n    if (stat) {\n      return { uid: stat.uid, gid: stat.gid }\n    }\n\n    // try the parent directory\n    if (resolved !== dirname(resolved)) {\n      return find(dirname(resolved))\n    }\n\n    // no more parents, never got a stat, just return an empty object\n    return {}\n  }\n}\n\n// given a path, uid, and gid update the ownership of the path if necessary\nconst update = (path, uid, gid) => {\n  // nothing to update, just exit\n  if (uid === undefined && gid === undefined) {\n    return\n  }\n\n  try {\n    // see if the permissions are already the same, if they are we don't\n    // need to do anything, so return early\n    const stat = fs.statSync(path)\n    if (uid === stat.uid && gid === stat.gid) {\n      return\n    }\n  } catch {\n    // ignore errors\n  }\n\n  try {\n    fs.chownSync(path, uid, gid)\n  } catch {\n    // ignore errors\n  }\n}\n\n// accepts a `path` and the `owner` property of an options object and normalizes\n// it into an object with numerical `uid` and `gid`\nconst validate = (path, input) => {\n  let uid\n  let gid\n\n  if (typeof input === 'string' || typeof input === 'number') {\n    uid = input\n    gid = input\n  } else if (input && typeof input === 'object') {\n    uid = input.uid\n    gid = input.gid\n  }\n\n  if (uid === 'inherit' || gid === 'inherit') {\n    const owner = find(path)\n    if (uid === 'inherit') {\n      uid = owner.uid\n    }\n\n    if (gid === 'inherit') {\n      gid = owner.gid\n    }\n  }\n\n  return { uid, gid }\n}\n\nmodule.exports = {\n  find,\n  update,\n  validate,\n}\n"],"mappings":"AAAA,MAAM;EAAEA,OAAF;EAAWC;AAAX,IAAuBC,OAAO,CAAC,MAAD,CAApC;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAC,KAAD,CAAnB;;AAEA,MAAME,EAAE,GAAGF,OAAO,CAAC,UAAD,CAAlB,C,CAEA;;;AACA,MAAMG,IAAI,GAAIC,IAAD,IAAU;EACrB;EACA,IAAI,CAACC,OAAO,CAACC,MAAb,EAAqB;IACnB,OAAO,EAAP;EACD,CAJoB,CAMrB;EACA;;;EACA,MAAMC,QAAQ,GAAGH,IAAI,IAAI,IAAR,IAAgBA,IAAI,CAACI,IAArB,IAA6BJ,IAAI,CAACK,MAAlC,GACbV,OAAO,CAACE,GAAG,CAACS,aAAJ,CAAkBN,IAAlB,CAAD,CADM,GAEbL,OAAO,CAACK,IAAD,CAFX;EAIA,IAAIO,IAAJ;;EAEA,IAAI;IACFA,IAAI,GAAGT,EAAE,CAACU,SAAH,CAAaL,QAAb,CAAP;EACD,CAFD,SAEU;IACR;IACA,IAAII,IAAJ,EAAU;MACR,OAAO;QAAEE,GAAG,EAAEF,IAAI,CAACE,GAAZ;QAAiBC,GAAG,EAAEH,IAAI,CAACG;MAA3B,CAAP;IACD,CAJO,CAMR;;;IACA,IAAIP,QAAQ,KAAKT,OAAO,CAACS,QAAD,CAAxB,EAAoC;MAClC,OAAOJ,IAAI,CAACL,OAAO,CAACS,QAAD,CAAR,CAAX;IACD,CATO,CAWR;;;IACA,OAAO,EAAP;EACD;AACF,CA9BD,C,CAgCA;;;AACA,MAAMQ,MAAM,GAAG,CAACX,IAAD,EAAOS,GAAP,EAAYC,GAAZ,KAAoB;EACjC;EACA,IAAID,GAAG,KAAKG,SAAR,IAAqBF,GAAG,KAAKE,SAAjC,EAA4C;IAC1C;EACD;;EAED,IAAI;IACF;IACA;IACA,MAAML,IAAI,GAAGT,EAAE,CAACe,QAAH,CAAYb,IAAZ,CAAb;;IACA,IAAIS,GAAG,KAAKF,IAAI,CAACE,GAAb,IAAoBC,GAAG,KAAKH,IAAI,CAACG,GAArC,EAA0C;MACxC;IACD;EACF,CAPD,CAOE,MAAM,CACN;EACD;;EAED,IAAI;IACFZ,EAAE,CAACgB,SAAH,CAAad,IAAb,EAAmBS,GAAnB,EAAwBC,GAAxB;EACD,CAFD,CAEE,MAAM,CACN;EACD;AACF,CAtBD,C,CAwBA;AACA;;;AACA,MAAMK,QAAQ,GAAG,CAACf,IAAD,EAAOgB,KAAP,KAAiB;EAChC,IAAIP,GAAJ;EACA,IAAIC,GAAJ;;EAEA,IAAI,OAAOM,KAAP,KAAiB,QAAjB,IAA6B,OAAOA,KAAP,KAAiB,QAAlD,EAA4D;IAC1DP,GAAG,GAAGO,KAAN;IACAN,GAAG,GAAGM,KAAN;EACD,CAHD,MAGO,IAAIA,KAAK,IAAI,OAAOA,KAAP,KAAiB,QAA9B,EAAwC;IAC7CP,GAAG,GAAGO,KAAK,CAACP,GAAZ;IACAC,GAAG,GAAGM,KAAK,CAACN,GAAZ;EACD;;EAED,IAAID,GAAG,KAAK,SAAR,IAAqBC,GAAG,KAAK,SAAjC,EAA4C;IAC1C,MAAMO,KAAK,GAAGlB,IAAI,CAACC,IAAD,CAAlB;;IACA,IAAIS,GAAG,KAAK,SAAZ,EAAuB;MACrBA,GAAG,GAAGQ,KAAK,CAACR,GAAZ;IACD;;IAED,IAAIC,GAAG,KAAK,SAAZ,EAAuB;MACrBA,GAAG,GAAGO,KAAK,CAACP,GAAZ;IACD;EACF;;EAED,OAAO;IAAED,GAAF;IAAOC;EAAP,CAAP;AACD,CAxBD;;AA0BAQ,MAAM,CAACC,OAAP,GAAiB;EACfpB,IADe;EAEfY,MAFe;EAGfI;AAHe,CAAjB"},"metadata":{},"sourceType":"script"}